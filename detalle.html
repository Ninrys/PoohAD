<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalle de Producto - Pooh After Dark</title>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <div id="header-placeholder"></div>

    <main class="container" style="margin-top: 50px; min-height: 70vh;">
        <div id="detalle-contenedor" class="row">
            </div>
    </main>

    <div id="footer-placeholder"></div>

    <script src="assets/js/productos.js"></script>
    <script>
        $(function() {
            $("#header-placeholder").load("header.html");
            $("#footer-placeholder").load("footer.html");

            // 1. Obtener el ID de la URL (gracias gemini :c )
            const params = new URLSearchParams(window.location.search);
            const idBuscado = parseInt(params.get('id'));

            // 2. Obtener la "base de datos" completa
            const db = JSON.parse(localStorage.getItem('tienda_db'));
            
            // 3. Buscar el producto en todas las categorías
            let productoEncontrado = null;
            Object.values(db).forEach(categoria => {
                const encontrado = categoria.find(p => p.id === idBuscado);
                if (encontrado) productoEncontrado = encontrado;
            });

            // 4. Renderizar la información
            if (productoEncontrado) {
                $("#detalle-contenedor").html(`
  <div class="col-md-10 col-md-offset-1">
    <div class="card" style="width:100%; padding:20px; background-color:#1A1A27;">
      <div class="row">
        
        <div class="col-md-6">
          <img 
            src="${productoEncontrado.img}" 
            class="img-responsive"
            style="border:1px solid #3D3A50; border-radius:6px;"
          >
        </div>

        <div class="col-md-6">
          <h2 class="card-title">${productoEncontrado.nombre}</h2>

          <p class="text-white" style="font-size:1.1em; margin-top:15px;">
            ${productoEncontrado.descripcion}
          </p>

          <h3 style="color:#FFFFFF; margin-top:20px;">
            Precio: <span style="color:#8A2BE2;">$${productoEncontrado.precio}</span>
          </h3>

          <div style="margin-top:25px;">
            <button class="btn btn-lg" 
              style="background-color:#8A2BE2; color:white; border:none;">
              Agregar al carrito
            </button>

            <a href="javascript:history.back()"   
              class="btn btn-lg"
              style="background-color:#35303a; color:white; margin-left:10px;">
              Volver
            </a>
          </div>
        </div>

      </div>
    </div>
  </div>
`);
            } else {
                $("#detalle-contenedor").html('<h3 class="text-center text-white">Producto no encontrado</h3>');
            }
        });
    </script>
</body>
</html>